# ğŸ­ How to Add Processing Stages in Mobile App

## âœ¨ New Feature Added!

You can now add all processing stages directly from the mobile app as a farmer!

---

## ğŸ“± Where to Find It

1. **Open your lot** in the mobile app
2. Go to **Lot Details** screen
3. Scroll down to the **"Certifications & Compliance"** card
4. You'll see **3 buttons**:
   - ğŸ“œ **Add Certificate** - Add certifications
   - âœ… **Check Compliance** - Run compliance checks
   - ğŸ­ **Add Processing Stage** - â­ NEW! Add processing stages

---

## ğŸ¯ How to Add Processing Stages

### Step 1: Click "Add Processing Stage" Button

### Step 2: Select Stage Type

Choose from 5 stage types:

- ğŸŒ¾ **Harvest** - Initial pepper harvesting from farm
- ğŸŒ¡ï¸ **Drying** - Drying process to reduce moisture
- ğŸ“Š **Grading** - Quality grading and sorting
- ğŸ“¦ **Packaging** - Packing for storage or export
- ğŸª **Storage** - Storage in controlled conditions

### Step 3: Fill Common Fields

- **Stage Name**: Auto-filled based on type (e.g., "Harvest Process")
- **Location**: Where this stage happened (e.g., "Matara Pepper Estate")
- **Operator Name**: Who performed this stage (e.g., "Farm Worker Team")
- **Stage Date**: When this happened (defaults to today)
- **Notes**: Optional additional information

### Step 4: Fill Stage-Specific Metrics

#### ğŸŒ¾ For Harvest Stage:

- **Yield (kg)**: Total harvest weight (e.g., 52)
- **Quality Score**: 0-100 (e.g., 95)
- **Harvest Method**: Manual or Mechanical

#### ğŸŒ¡ï¸ For Drying Stage:

- **Moisture Content (%)**: âš ï¸ Must be â‰¤12.5% for EU export! (e.g., 11.8)
- **Temperature (Â°C)**: Drying temperature (e.g., 28)
- **Duration (hours)**: How long dried (e.g., 72)

#### ğŸ“Š For Grading Stage:

- **Quality Grade**: AAA, AA, A, B, or C
- **Color**: Black, White, or Green
- **Uniformity (%)**: Consistency percentage (e.g., 95)

#### ğŸ“¦ For Packaging Stage:

- **Package Material**: Choose from:
  - Food grade plastic âœ…
  - HDPE âœ…
  - PP âœ…
  - PET âœ…
  - Glass âœ…
  - Jute with liner âœ…
- **Pack Size**: e.g., 500g, 1kg
- **Number of Packs**: Total units (e.g., 100)

#### ğŸª For Storage Stage:

- **Storage Type**: e.g., Cold Storage, Warehouse
- **Storage Temperature (Â°C)**: e.g., 20
- **Humidity (%)**: e.g., 60

### Step 5: Click "Add Processing Stage"

The stage will be added to your lot's traceability chain!

---

## âœ… Complete Traceability Chain

To pass **EU Compliance**, you need all 4 stages:

1. ğŸŒ¾ **Harvest** â†’ 2. ğŸŒ¡ï¸ **Drying** â†’ 3. ğŸ“Š **Grading** â†’ 4. ğŸ“¦ **Packaging**

### Example: Adding All 4 Stages

#### Stage 1: Harvest

- Type: **Harvest**
- Name: **Pepper Harvesting**
- Location: **Matara Pepper Estate**
- Operator: **Farm Worker Team**
- Date: (Select harvest date)
- Yield: **52 kg**
- Quality Score: **95**
- Harvest Method: **Manual**
- Notes: **Harvested at optimal maturity**

#### Stage 2: Drying

- Type: **Drying**
- Name: **Drying Process**
- Location: **Matara Processing Facility**
- Operator: **Processing Team A**
- Date: (Day after harvest)
- Moisture: **11.8%** âš ï¸ Must be â‰¤12.5%
- Temperature: **28Â°C**
- Duration: **72 hours**
- Notes: **Dried to EU export standards**

#### Stage 3: Grading

- Type: **Grading**
- Name: **Grading Process**
- Location: **Matara Quality Control**
- Operator: **QC Inspector**
- Date: (Day after drying)
- Grade: **A**
- Color: **Black**
- Uniformity: **95%**
- Notes: **Graded per international standards**

#### Stage 4: Packaging

- Type: **Packaging**
- Name: **Packaging Process**
- Location: **Matara Packaging Unit**
- Operator: **Packaging Team B**
- Date: (Day after grading)
- Material: **Food_grade_plastic**
- Pack Size: **500g**
- Pack Count: **100 units**
- Notes: **EU-approved materials**

---

## ğŸ¯ Tips for EU Compliance

### Critical Requirements:

1. **Moisture Content** (Drying stage):

   - âœ… Must be **â‰¤12.5%** for EU
   - âš ï¸ The form will warn you if higher

2. **Package Material** (Packaging stage):

   - âœ… Must be **food-grade**
   - Choose: Food_grade_plastic, HDPE, PP, PET, Glass, or Jute_with_liner

3. **Complete Chain**:

   - âœ… Must have: Harvest â†’ Drying â†’ Grading â†’ Packaging
   - Missing stages = Failed "Full Traceability Chain" check

4. **Quality Grade** (Grading stage):
   - âœ… EU accepts: A, AA, or AAA
   - âš ï¸ B and C grades don't meet EU standards

---

## ğŸ“Š After Adding All Stages

1. Go back to **Lot Details**
2. Click **"Check Compliance"**
3. Select **"EU"** market
4. All checks should pass! âœ…

### Expected Result:

```
âœ“ EU Organic Certification Required
âœ“ Fumigation Certificate Required
âœ“ EU Quality Standards
âœ“ Pesticide Residue Limits
âœ“ Moisture Content Standard (11.8% â‰¤ 12.5%)
âœ“ Food Grade Packaging Required
âœ“ Full Traceability Chain (Harvest â†’ Drying â†’ Grading â†’ Packaging)
```

**Status: PASSED** ğŸ‰

---

## ğŸ”„ View Your Processing Stages

After adding stages:

1. Go to **"Blockchain Traceability"** tab
2. Click **"Processing"** tab
3. See all your processing stages with timeline

---

## ğŸš¨ Common Issues

### Issue 1: "Missing required fields"

**Solution**: Make sure you filled:

- Stage Type âœ“
- Stage Name âœ“
- Location âœ“
- Operator Name âœ“
- All stage-specific metrics âœ“

### Issue 2: "Compliance check fails for moisture"

**Solution**:

- Moisture must be â‰¤12.5%
- Edit drying stage to lower moisture content

### Issue 3: "Full Traceability Chain fails"

**Solution**:

- Make sure you added all 4 stages:
  - Harvest âœ“
  - Drying âœ“
  - Grading âœ“
  - Packaging âœ“

### Issue 4: "Package material not accepted"

**Solution**:

- Use food-grade materials:
  - Food_grade_plastic âœ…
  - HDPE, PP, PET, Glass âœ…
  - NOT regular plastic âŒ

---

## ğŸ’¡ Best Practices

1. **Add stages in order**: Harvest â†’ Drying â†’ Grading â†’ Packaging
2. **Use correct dates**: Set dates chronologically (harvest first, packaging last)
3. **Record accurate metrics**: Especially moisture content and quality grade
4. **Add detailed notes**: Helps with audits and transparency
5. **Use food-grade materials**: For packaging stage

---

## ğŸŠ Success!

Once you add all 4 processing stages with correct metrics:

- âœ… Complete traceability chain established
- âœ… EU compliance requirements met
- âœ… Lot ready for international export
- âœ… Blockchain traceability fully operational

**Your SmartPepper lot is now certified for EU export!** ğŸŒğŸš¢

---

## ğŸ“± Summary

**Where**: Lot Details â†’ "Certifications & Compliance" card â†’ "Add Processing Stage" button

**What**: 5 stage types (Harvest, Drying, Grading, Packaging, Storage)

**Why**: Complete traceability chain required for EU compliance

**How**: Fill form â†’ Add stage-specific metrics â†’ Submit

**Result**: Full traceability + Pass all compliance checks! ğŸ‰
